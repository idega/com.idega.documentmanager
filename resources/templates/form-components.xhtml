<?xml version="1.0" encoding="UTF-8"?>
<html xmlns:xhtml="http://www.w3.org/1999/xhtml" 
xmlns:xs="http://www.w3.org/2001/XMLSchema"
xmlns:xf="http://www.w3.org/2002/xforms" 
xmlns:ev="http://www.w3.org/2001/xml-events" 
xmlns="http://www.w3.org/1999/xhtml"
xmlns:idega="http://idega.com/xforms"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
<head>
<title>formbuilder components</title>

<xf:model id="components_model" schema="default-components.xsd">

	<xf:instance id="components_instance" xmlns="">
		<data> 
			<output_text />
			<text /> 
			<id_number nodeType="formIdentifier">IW2000-01-01-0001</id_number>
			<email xsi:nil="true"/> 
			<textarea />
			<secret />
			<multiple_select_minimal />
			<single_select_minimal />
			<multiple_select />
			<single_select />
			<upload>
                 <entry filename="" mediatype=""/>
            </upload>
			<multiupload>
			   <group />
			   <entry filename="" mediatype="">
                    <description/>
			   </entry>     	
			   <entry filename="" mediatype="">
                    <description/>
               </entry>
            </multiupload>
            <!--  
            <multiupload_description>
            	<group />
				<entry filename="" mediatype="">
				<description />
			    </entry>	     	
			   <entry filename="" mediatype="">
				<description />
			    </entry>	
            </multiupload_description>
            -->
            <autofill_name />
            <autofill_first_name />
            <autofill_last_name />
            <autofill_personal_id />
            <autofill_address />
            <autofill_phones />
            <autofill_emails />       
            <autofill_country />
            <autofill_province />
            <autofill_city />
            <autofill_commune />
            <autofill_postal_code />       
			<page /> 
		</data>
	</xf:instance>	
	
	<!-- types hexBinary anyURI base64Binary -->
    <xf:bind id="upload" nodeset="upload/entry" type="xs:anyURI"/>
    
    <xf:bind id="multiupload" nodeset="multiupload/entry[position() != last()]" type="xs:anyURI">
        <xf:bind id="multiupload-group" nodeset="../group" relevant="instance('control-instance')/readonly != 'true' and instance('control-instance')/generatePdf != 'true'"/>
    </xf:bind>
    
    <!--  
    <xf:bind id="multiupload.group" nodeset="multiupload/group">
		<xf:bind id="multiupload" nodeset="../entry[position() != last()]" type="xs:anyURI"/>
	</xf:bind>

    <xf:bind id="multiupload_description.group" nodeset="multiupload_description/group">
		<xf:bind id="multiupload" nodeset="../entry[position() != last()]" type="xs:anyURI"/>
	</xf:bind>
	-->
	    
    <xf:bind id="identifier_number" nodeset="id_number" readonly="true()" type="xs:string" />
    
    <xf:bind id="autofill_name" nodeset="autofill_name" type="xs:string" />
    <xf:bind id="autofill_first_name" nodeset="autofill_first_name" type="xs:string" />
    <xf:bind id="autofill_last_name" nodeset="autofill_last_name" type="xs:string" />
    <xf:bind id="autofill_personal_id" nodeset="autofill_personal_id" type="xs:string" />
    <xf:bind id="autofill_address" nodeset="autofill_address" type="xs:string" />
    <xf:bind id="autofill_phones" nodeset="autofill_phones" type="xs:string" />
    <xf:bind id="autofill_emails" nodeset="autofill_emails" type="xs:string" />
    <xf:bind id="autofill_country" nodeset="autofill_country" type="xs:string" />
    <xf:bind id="autofill_province" nodeset="autofill_province" type="xs:string" />
    <xf:bind id="autofill_city" nodeset="autofill_city" type="xs:string" />
    <xf:bind id="autofill_commune" nodeset="autofill_commune" type="xs:string" />
    <xf:bind id="autofill_postal_code" nodeset="autofill_postal_code" type="xs:string" />
    
	<xf:bind id="text" nodeset="text" type="xs:string" />
	<xf:bind id="textarea" nodeset="textarea" type="xs:string" />
	<xf:bind id="secret" nodeset="secret" type="xs:string" />
	<xf:bind id="multiple_select_minimal" nodeset="multiple_select_minimal"
		type="xs:string" />
	<xf:bind id="single_select_minimal" nodeset="single_select_minimal"
		type="xs:string" />
	<xf:bind id="multiple_select" nodeset="multiple_select" type="xs:string" />
	<xf:bind id="single_select" nodeset="single_select" type="xs:string" />

	<xf:bind id="email" nodeset="email" type="fb_email" />
	<xf:bind id="page" nodeset="page" />
	<xf:bind id="output_text" nodeset="output_text" />
	
	<xf:bind id="bind-controlsButton" nodeset="instance('control-instance')/controlsButton" relevant="instance('control-instance')/generatePdf != 'true'" />

</xf:model>
<xf:model id="data_model">
	<xf:instance id="localized_strings" xmlns="">
		<localized_strings>
			<current_language>en</current_language>
			<default_language>en</default_language>
			
			<email-label lang="en">Email</email-label>
			<email-label lang="is_IS">Tölvupóstfang</email-label>
			<email.error lang="en">Invalid email</email.error>
			<email.error lang="is_IS">Óleyfilegt tölvupóstfang</email.error>
			<select1_full-label lang="en">Radiobutton</select1_full-label>
			<select1_full-label lang="is_IS">Valhnappur</select1_full-label>
			<select_full-label lang="en">Checkbox</select_full-label>
			<select_full-label lang="is_IS">Checkbox</select_full-label>
			<select1_minimal-label lang="en">Dropdown menu</select1_minimal-label>
			<select1_minimal-label lang="is_IS">Valreitur</select1_minimal-label>
			<select_minimal-label lang="en">List</select_minimal-label>
			<select_minimal-label lang="is_IS">Listi</select_minimal-label>
			<secret-label lang="en">Password input</secret-label>
			<secret-label lang="is_IS">Lykilorð</secret-label>
			<textarea-label lang="en">Paragraph text input</textarea-label>
			<textarea-label lang="is_IS">Málsgrein</textarea-label>
			<!--  
			<rich_textarea-label lang="en">Rich text input</rich_textarea-label>
			<rich_textarea-label lang="is_IS">Textareitur (með stílsniði)</rich_textarea-label>
			-->
			<input-label lang="en">Simple text input</input-label>
			<input-label lang="is_IS">Textareitur</input-label>
			
			<!--  
			<multi_upload_file.title lang="en">Multi file upload</multi_upload_file.title>
			<multi_upload_file.title lang="is_IS">Hlaða inn skjölum</multi_upload_file.title> 
			<multi_upload_file.label lang="en">Add One</multi_upload_file.label>
			<multi_upload_file.label lang="is_IS">Bæta við</multi_upload_file.label> 
			<multi_upload_file.remove lang="en">Remove</multi_upload_file.remove>
			<multi_upload_file.remove lang="is_IS">Fjarlægja</multi_upload_file.remove>
			<multi_upload_file.name lang="en">Uploaded file name</multi_upload_file.name>
			<multi_upload_file.name lang="is_IS">Skráarnafn</multi_upload_file.name>
			
			<multi_upload_description_file.title lang="en">Multi file upload with description</multi_upload_description_file.title>
			<multi_upload_description_file.title lang="is_IS">Hlaða inn skjölum með lýsingu</multi_upload_description_file.title> 
			<multi_upload_description_file.label lang="en">Add One</multi_upload_description_file.label>
			<multi_upload_description_file.label lang="is_IS">Bæta við</multi_upload_description_file.label> 
			<multi_upload_description_file.remove lang="en">Remove</multi_upload_description_file.remove>
			<multi_upload_description_file.remove lang="is_IS">Fjarlægja</multi_upload_description_file.remove>
			<multi_upload_description_file.text lang="en">File description</multi_upload_description_file.text>
			<multi_upload_description_file.text lang="is_IS">Skráarlýsing</multi_upload_description_file.text>
			<multi_upload_description_file.info lang="en">Please enter file description</multi_upload_description_file.info>
			<multi_upload_description_file.info lang="is_IS">Vinsamlega skráðu inn skráarlýsingu</multi_upload_description_file.info>
			<multi_upload_description_file.name lang="en">Uploaded file name</multi_upload_description_file.name>
			<multi_upload_description_file.name lang="is_IS">Skráarnafn</multi_upload_description_file.name>
			-->
			
            <upload-label lang="is_IS">Hlaða inn skjali</upload-label>
            <upload-label lang="en">File upload</upload-label>
			
			<multiupload-title lang="is_IS">Viðhengi</multiupload-title>
            <multiupload-title lang="en">Attachements</multiupload-title>
            <multiupload-insert_trigger-label lang="is_IS">Bæta við viðhengi</multiupload-insert_trigger-label>
            <multiupload-insert_trigger-label lang="en">Add attachement</multiupload-insert_trigger-label> 
            <multiupload-remove_trigger-label lang="is_IS">Fjarlægja viðhengi</multiupload-remove_trigger-label>
            <multiupload-remove_trigger-label lang="en">Remove</multiupload-remove_trigger-label>
            <multiupload-description-label lang="is_IS">Lýsandi nafn skjals</multiupload-description-label>
            <multiupload-description-label lang="en">Descriptive name</multiupload-description-label> 
            <multiupload-custom lang="is_IS">Það þarf að setja lýsandi nafn á skjalið</multiupload-custom>
            <multiupload-custom lang="en">Uploaded file description can not be empty</multiupload-custom>
            <multiupload-filename-label lang="is_IS">Skráarnafn</multiupload-filename-label>
            <multiupload-filename-label lang="en">Uploaded file name</multiupload-filename-label>
			
			
			
			<page-label lang="en">Section</page-label>
			<page-label lang="is_IS">Svæði</page-label>
			<confirmation_page-label lang="en">Confirmation Section</confirmation_page-label>
			<confirmation_page-label lang="is_IS">Staðfestingarsvæði</confirmation_page-label>
			<next_button-label lang="en">Next</next_button-label>
			<next_button-label lang="is_IS">Næsta skref</next_button-label>
			<previous_button-label lang="en">Previous</previous_button-label>
			<previous_button-label lang="is_IS">Til baka</previous_button-label>
			
			<submit_button-label lang="en">Submit</submit_button-label>
			<submit_button-label lang="is_IS">Senda</submit_button-label>
			
			<save_button-label lang="en">Save</save_button-label>
			<save_button-label lang="is_IS">Vista</save_button-label>
			<simple_text-text lang="en">Paragraph text</simple_text-text>
			<simple_text-text lang="is_IS">Málsgrein</simple_text-text>
			<simple_text-label lang="en"></simple_text-label>
			<simple_text-label lang="is_IS"></simple_text-label>

			<header_text-text lang="en">Header text</header_text-text>
			<header_text-text lang="is_IS">Fyrirsögn</header_text-text>
			
			<identifier-label lang="en">Identifier number</identifier-label>
			<identifier-label lang="is_IS">Einkvæmt númer</identifier-label>
			<autofill_name-label lang="en">Name</autofill_name-label>
            <autofill_name-label lang="is_IS">Nafn</autofill_name-label>       
			<autofill_first_name-label lang="en">First name</autofill_first_name-label>
            <autofill_first_name-label lang="is_IS">Nafn</autofill_first_name-label>       
            <autofill_last_name-label lang="en">Last name</autofill_last_name-label>
            <autofill_last_name-label lang="is_IS">Eftirnafn</autofill_last_name-label> 
            <autofill_personal_id-label lang="en">Personal id</autofill_personal_id-label>
            <autofill_personal_id-label lang="is_IS">Kennitala</autofill_personal_id-label>   
            <autofill_address-label lang="en">Address</autofill_address-label>
            <autofill_address-label lang="is_IS">Heimilisfang</autofill_address-label>
            <autofill_phones-label lang="en">Phones</autofill_phones-label>
            <autofill_phones-label lang="is_IS">Símar</autofill_phones-label>
            <autofill_emails-label lang="en">Emails</autofill_emails-label>
            <autofill_emails-label lang="is_IS">Netföng</autofill_emails-label>
            <autofill_country-label lang="en">Country</autofill_country-label>
            <autofill_country-label lang="is_IS">Land</autofill_country-label>
            <autofill_province-label lang="en">Province</autofill_province-label>
            <autofill_province-label lang="is_IS">Svæði</autofill_province-label>
            <autofill_city-label lang="en">City</autofill_city-label>
            <autofill_city-label lang="is_IS">Borg</autofill_city-label>
            <autofill_commune-label lang="en">Commune</autofill_commune-label>
            <autofill_commune-label lang="is_IS">Sveitarfélag</autofill_commune-label>
            <autofill_postal_code-label lang="en">Postal code</autofill_postal_code-label>
            <autofill_postal_code-label lang="is_IS">Póstnúmer</autofill_postal_code-label>
            <text_output-label lang="en">Text output</text_output-label>
			<text_output-label lang="is_IS">Text output</text_output-label>
			<static_output-label lang="en">Text</static_output-label>
			<static_output-label lang="is_IS">Texti</static_output-label>
			<static_output-text lang="en">Message</static_output-text>
			<static_output-text lang="is_IS">Skilaboð</static_output-text>
		</localized_strings>
	</xf:instance>
	
	<xf:instance id="components-datatypes-mappings" xmlns="">
		<componentDataTypes>
		    <component component_id="fbc_identifier_number" accessSupport="r">
                <datatype>string</datatype>
            </component>
			<component component_id="fbc_textarea" accessSupport="rw">
				<datatype>string</datatype>
			</component>
			<component component_id="fbc_text" accessSupport="rw">
				<datatype>string</datatype>
			</component>
			<component component_id="fbc_secret" accessSupport="w">
				<datatype>string</datatype>
			</component>
			<component component_id="fbc_multiple_select_minimal" accessSupport="rw">
				<datatype>list</datatype>
			</component>
			<component component_id="fbc_single_select_minimal" accessSupport="rw">
				<datatype>string</datatype>
			</component>
			<component component_id="fbc_multiple_select" accessSupport="rw">
				<datatype>list</datatype>
			</component>
			<component component_id="fbc_single_select" accessSupport="rw">
				<datatype>string</datatype>
			</component>
			<component component_id="fbc_email" accessSupport="rw">
				<datatype>string</datatype>
			</component>
			<component component_id="fbc_upload" accessSupport="w">
				<datatype>file</datatype>
			</component>
			<component component_id="fbc_multiupload" accessSupport="w">
				<datatype>files</datatype>
			</component>
			<component component_id="fbc_simple_text" accessSupport="r">
				<datatype>string</datatype>
				<datatype>list</datatype>
			</component>
			<component component_id="fbc_header_text" accessSupport="r">
				<datatype>string</datatype>
			</component>
			<component component_id="fbc_static_output" accessSupport="r">
				<datatype>string</datatype>
			</component>
			<component component_id="fbc_text_output" accessSupport="rw">
				<datatype>string</datatype>
			</component>
		</componentDataTypes>
	</xf:instance>
	
	<xf:instance id="datasets_examples" xmlns="">
		<examples> 
			<item id="itemset"> <xf:itemset model="data_model">
				<xf:label ref="itemLabel" />
				<xf:value ref="itemValue" />
			</xf:itemset> </item> 
			<item id="alert">
			    <xf:alert ref="instance('error-instance')/error[@for='$id']"/> 
			</item>
			<item id="help"> 
				<xf:help>
  					<xf:output helptype="validationtext" class="fbc_required_text" ref="instance('localized_strings')/localizedEntries[@lang=instance('localized_strings')/current_language]"
					   model="data_model" value="if(instance('control-instance')/validation_event='submit' and instance('data-instance')/Nodeset ='' , instance('localized_strings')/localizedEntries[@lang=instance('localized_strings')/current_language], '')"/>
					 <xf:output helptype="helptext" ref="instance('localized_strings')/localizedEntries[@lang=instance('localized_strings')/current_language]" model="data_model" />
				</xf:help>
			</item>	
			<item id="item_src">
				<item>
					<itemLabel></itemLabel>
					<itemValue></itemValue>
				</item>
			</item> 
			<item id="autofill-model">
				<xf:model id="x-autofill-model">
					<xf:action ev:event="xforms-ready" />
		        </xf:model>
    	    </item>
    	    <item id="toggle-element">
				<xf:toggle ev:event="DOMActivate" />
    	    </item>
    	    <item id="section_item">
				<section selected="false">
	           		<id></id>
	           		<seq_index></seq_index>
	           	</section>
    	    </item>
    	    <item id="sections_visualization_instance_item">
				<xf:instance id="sections_visualization_instance" xmlns="">
	            	<sections>
		            	<class_exp for="true">current</class_exp>
		            	<class_exp for="false"></class_exp>
	            	</sections>
            	</xf:instance>
    	    </item>
    	    <item id="sections_visualization_item">
				<xf:repeat id="sections_visualization" nodeset="instance('sections_visualization_instance')/section" appearance="minimal" model="data_model">
					<xf:output mediatype="text/html" 
					value="concat(
						'&lt;div ',
						'class=&quot;',
						instance('sections_visualization_instance')/class_exp[@for=current()/@selected],
						'&quot;',
						'&gt;', 
						./seq_index,
						'&lt;/div&gt;'
					)" />
	        	</xf:repeat>
    	    </item>
		</examples>
	</xf:instance>

	<xf:instance id="fbc_multiple_select_minimal_lds" xmlns="">
		<local_src>
 	       <localizedEntries lang="en">
    	       <item>
        	       <itemLabel>Change me</itemLabel>
                   <itemValue>changeme</itemValue>
               </item>
           </localizedEntries>
        </local_src>
	</xf:instance>
	<xf:instance id="fbc_single_select_minimal_lds" xmlns="">
		<local_src>
 	       <localizedEntries lang="en">
    	       <item>
        	       <itemLabel>Change me</itemLabel>
                   <itemValue>changeme</itemValue>
               </item>
           </localizedEntries>
        </local_src>
	</xf:instance>
	<xf:instance id="fbc_multiple_select_lds" xmlns="">
		<local_src>
 	       <localizedEntries lang="en">
    	       <item>
        	       <itemLabel>Change me</itemLabel>
                   <itemValue>changeme</itemValue>
               </item>
           </localizedEntries>
        </local_src>
	</xf:instance>
	<xf:instance id="fbc_single_select_lds" xmlns="">
		<local_src>
 	       <localizedEntries lang="en">
    	       <item>
        	       <itemLabel>Change me</itemLabel>
                   <itemValue>changeme</itemValue>
               </item>
           </localizedEntries>
        </local_src>
	</xf:instance>
	<xf:instance id="fbc_multiple_select_minimal_eds" xmlns="">
		<ext_src> </ext_src>
	</xf:instance>
	<xf:instance id="fbc_single_select_minimal_eds" xmlns="">
		<ext_src> </ext_src>
	</xf:instance>
	<xf:instance id="fbc_multiple_select_eds" xmlns="">
		<ext_src> </ext_src>
	</xf:instance>
	<xf:instance id="fbc_single_select_eds" xmlns="">
		<ext_src> </ext_src>
	</xf:instance>
	
	<xf:instance id="component_categories" xmlns="">
		<category name="autofill">
	        <component component_id="fbc_identifier_number" />
	        <component component_id="fbc_autofill_name" />
	        <component component_id="fbc_autofill_first_name" />
	        <component component_id="fbc_autofill_last_name" />
	        <component component_id="fbc_autofill_personal_id" />
	        <component component_id="fbc_autofill_address" />
	        <component component_id="fbc_autofill_phones" />
	       	<component component_id="fbc_autofill_emails" />    	
	       	<component component_id="fbc_autofill_country" />  
	       	<component component_id="fbc_autofill_province" />  
	       	<component component_id="fbc_autofill_city" />
	       	<component component_id="fbc_autofill_commune" />  
	       	<component component_id="fbc_autofill_postal_code" />              
	    </category>
	    
		<category name="basic">
			<component component_id="fbc_text" />
	
			<component component_id="fbc_textarea" />
			<component component_id="fbc_secret" />
			<component component_id="fbc_multiple_select_minimal" />
			<component component_id="fbc_single_select_minimal" />
			<component component_id="fbc_multiple_select" />
			<component component_id="fbc_single_select" />
			<component component_id="fbc_email" />
			<component component_id="fbc_upload_file" />
			<component component_id="fbc_multi_upload_file"/>
			<component component_id="fbc_multi_upload_description_file"/>
			<component component_id="fbc_text_output" />
		</category>
		
		<category name="buttons">
			<component component_id="fbc_button_next" />
			<component component_id="fbc_button_previous" />
			<component component_id="fbc_button_submit" />
			<component component_id="fbc_button_save" />
		</category>
		<category name="non-display">
			<component component_id="fbc_button_area" />
			<component component_id="fbc_page" />
			<component component_id="fbc_confirmation_page" />
		</category>
		<category name="plain">
			<component component_id="fbc_simple_text" />
			<component component_id="fbc_static_output" />
			<component component_id="fbc_header_text" />
			<component component_id="fbc_separator" />
		</category>
	</xf:instance>
</xf:model>
</head>
<body>
<xf:group appearance="full">
	<xf:group appearance="full">
	
	<xf:upload bind="upload" id="fbc_upload"> 
            <xf:label ref="instance('localized_strings')/upload-label[@lang=instance('localized_strings')/current_language]" model="data_model" />
            <xf:filename ref="@filename"/>
            <xf:mediatype ref="@mediatype"/>
    </xf:upload>
	
	<xf:group appearance="full" bind="multiupload-group" id="fbc_multiupload" type="fbc_multiupload">
        <idega:dispatch ev:event="idega-xforms-ready" name="idega-validate" target="//*[@id='fbc_multiupload']//xf:upload" stopOnError="true"/>
        
        <xf:label model="data_model" ref="instance('localized_strings')/multiupload-title[@lang=instance('localized_strings')/current_language]"/>
        <xf:trigger>
            <xf:label model="data_model" ref="instance('localized_strings')/multiupload-insert_trigger-label[@lang=instance('localized_strings')/current_language]"/>
            <xf:action>
                <xf:insert at="last()" nodeset="instance('data-instance')/multiupload/entry" position="before"/>
            </xf:action>
        </xf:trigger>
        
        <xf:repeat appearance="group" bind="multiupload" id="multiupload_entries">
            <xf:group>
                <xf:input ref="./description">
                    <xf:label model="data_model" ref="instance('localized_strings')/multiupload-description-label[@lang=instance('localized_strings')/current_language]"/>
                    <idega:dispatch ev:event="xforms-value-changed" name="idega-validate" target="//*[@id='fbc_multiupload']//xf:upload" stopOnError="true"/>
                </xf:input>
                
                <xf:group ref=".[. !='' and ./description ='']" appearance="minimal" class="error">
                    <xf:output value="instance('error-instance')/error[@for='fbc_multiupload']"/>
                </xf:group>
                
                <xf:output ref="@filename">
                    <xf:label model="data_model" ref="instance('localized_strings')/multiupload-filename-label[@lang=instance('localized_strings')/current_language]"/>
                </xf:output>
                
                <xf:upload ref=".">
                    <xf:filename ref="@filename"/>
                    <xf:mediatype ref="@mediatype"/>
                    <idega:dispatch ev:event="xforms-value-changed" name="idega-validate" target="//*[@id='fbc_multiupload']//xf:upload" stopOnError="true"/>
                    <idega:validator ev:event="idega-validate" validateif="(.!='' and ./description !='') or (.='' and ./description ='')" componentId="fbc_multiupload">
                        <idega:message errorType="custom" model="data_model" value="instance('localized_strings')/multiupload-custom[@lang=instance('localized_strings')/current_language]"/>
                    </idega:validator>
                </xf:upload>
                
                <xf:trigger>
                    <xf:label model="data_model" ref="instance('localized_strings')/multiupload-remove_trigger-label[@lang=instance('localized_strings')/current_language]"/>
                    <xf:action>
                        <xf:delete at="index('multiupload_entries')" nodeset="instance('data-instance')/multiupload/entry"/>
                    </xf:action>
                </xf:trigger>
            </xf:group> 
        </xf:repeat>
    </xf:group>

<!--  	
	<xf:group appearance="full" bind="multiupload.group" id ="fbc_multi_upload_file" name = "fbc_multi_upload_file" >
	     <xf:label ref="instance('localized_strings')/multi_upload_file.title[@lang=instance('localized_strings')/current_language]" model="data_model" />
		 <xf:trigger>
                   <xf:label ref="instance('localized_strings')/multi_upload_file.label[@lang=instance('localized_strings')/current_language]" model="data_model" />
                    <xf:action>
                        <xf:insert nodeset="instance('data-instance')/multiupload/entry" at="last()" position="before"/>
                    </xf:action>
         </xf:trigger>
                  	<xf:repeat id="upload-entries" bind="multiupload" appearance="group" >
                  	 <xf:group appearance="group">
						<xf:output ref="@filename">
							<xf:label model="data_model" ref="instance('localized_strings')/multi_upload_description_file.name[@lang=instance('localized_strings')/current_language]" />
						</xf:output>
				
                    <xf:upload ref=".">
                        <xf:filename ref="@filename"/>
                        <xf:mediatype ref="@mediatype"/>      
                    </xf:upload>           	 
               	    <xf:trigger>
               	   		<xf:label ref="instance('localized_strings')/multi_upload_file.remove[@lang=instance('localized_strings')/current_language]" model="data_model" />
               	    	<xf:action>
					 		<xf:delete at="index('upload-entries')" nodeset="instance('data-instance')/multiupload/entry"/>
						</xf:action>
						</xf:trigger>
					</xf:group>
                </xf:repeat>
		
    	</xf:group>
    	
    	<xf:group appearance="full" bind="multiupload_description.group" id ="fbc_multi_upload_description_file" name = "fbc_multi_upload_description_file" >
	     <xf:label ref="instance('localized_strings')/multi_upload_description_file.title[@lang=instance('localized_strings')/current_language]" model="data_model" />
		 <xf:trigger>
                   <xf:label ref="instance('localized_strings')/multi_upload_description_file.label[@lang=instance('localized_strings')/current_language]" model="data_model" />
                    <xf:action>
                        <xf:insert nodeset="instance('data-instance')/multiupload_description/entry" at="last()" position="before"/>
                    </xf:action>
         </xf:trigger>
                  	<xf:repeat id="upload-entries" bind="multiupload" appearance="group" >
                  	<xf:group appearance="group">
                  		<xf:input ref="./description">
                  		 <xf:label
                			ref="instance('localized_strings')/multi_upload_description_file.text[@lang=instance('localized_strings')/current_language]"
                			model="data_model" /> 
                  		</xf:input>	
                  		<xf:output value="if(. !='' and ./description ='', instance('localized_strings')/multi_upload_description_file.info[@lang=instance('localized_strings')/current_language], '')"
                  		 ref="instance('localized_strings')/multi_upload_description_file.info[@lang=instance('localized_strings')/current_language]"
							model="data_model" />
                  	
						<xf:output ref="@filename">
							<xf:label model="data_model" ref="instance('localized_strings')/multi_upload_description_file.name[@lang=instance('localized_strings')/current_language]" />
						</xf:output>
				  		 
                  		    <xf:upload ref=".">
                        	<xf:filename ref="@filename"/>
                        	<xf:mediatype ref="@mediatype"/>      
                    	</xf:upload>     
                    	                    	
               	    	<xf:trigger>
               	   		<xf:label ref="instance('localized_strings')/multi_upload_description_file.remove[@lang=instance('localized_strings')/current_language]" model="data_model" />
               	    		<xf:action>
					 			<xf:delete at="index('upload-entries')" nodeset="instance('data-instance')/multiupload_description/entry"/>
							</xf:action>
						</xf:trigger>
					</xf:group>
												
                </xf:repeat>
		
    	</xf:group>
    	-->
    	
    	 <xf:input bind="autofill_name" id="fbc_autofill_name" autofillkey="loginSession.user.name">
           <xf:label
                ref="instance('localized_strings')/autofill_name-label[@lang=instance('localized_strings')/current_language]"
                model="data_model" /> 
        </xf:input>
        
         <xf:input bind="autofill_first_name" id="fbc_autofill_first_name" autofillkey="loginSession.user.firstName">
           <xf:label
                ref="instance('localized_strings')/autofill_first_name-label[@lang=instance('localized_strings')/current_language]"
                model="data_model" /> 
        </xf:input>
        
        <xf:input bind="autofill_last_name" id="fbc_autofill_last_name" autofillkey="loginSession.user.lastName">
           <xf:label
                ref="instance('localized_strings')/autofill_last_name-label[@lang=instance('localized_strings')/current_language]"
                model="data_model" /> 
        </xf:input>
        
        <xf:input bind="autofill_personal_id" id="fbc_autofill_personal_id" autofillkey="loginSession.user.personalID">
           <xf:label
                ref="instance('localized_strings')/autofill_personal_id-label[@lang=instance('localized_strings')/current_language]"
                model="data_model" /> 
        </xf:input>
        
        <xf:input bind="autofill_address" id="fbc_autofill_address" autofillkey="loginSession.user.usersMainAddress.streetAddress">
           <xf:label
                ref="instance('localized_strings')/autofill_address-label[@lang=instance('localized_strings')/current_language]"
                model="data_model" /> 
        </xf:input>
        
         <xf:input bind="autofill_emails" id="fbc_autofill_emails" autofillkey="collection-string-loginSession.user.emails.emailAddress">
           <xf:label
                ref="instance('localized_strings')/autofill_emails-label[@lang=instance('localized_strings')/current_language]"
                model="data_model" /> 
        </xf:input>
        
         <xf:input bind="autofill_phones" id="fbc_autofill_phones" autofillkey="collection-string-loginSession.user.phones.number">
           <xf:label
                ref="instance('localized_strings')/autofill_phones-label[@lang=instance('localized_strings')/current_language]"
                model="data_model" /> 
        </xf:input>
     
        <xf:input bind="autofill_country" id="fbc_autofill_country" autofillkey="loginSession.user.usersMainAddress.country">
           <xf:label
                ref="instance('localized_strings')/autofill_country-label[@lang=instance('localized_strings')/current_language]"
                model="data_model" /> 
        </xf:input>
        
        <xf:input bind="autofill_province" id="fbc_autofill_province" autofillkey="loginSession.user.usersMainAddress.province">
           <xf:label
                ref="instance('localized_strings')/autofill_province-label[@lang=instance('localized_strings')/current_language]"
                model="data_model" /> 
        </xf:input>
        
        <xf:input bind="autofill_city" id="fbc_autofill_city" autofillkey="loginSession.user.usersMainAddress.city">
           <xf:label
                ref="instance('localized_strings')/autofill_city-label[@lang=instance('localized_strings')/current_language]"
                model="data_model" /> 
        </xf:input>
        
         <xf:input bind="autofill_commune" id="fbc_autofill_commune" autofillkey="loginSession.user.usersMainAddress.commune.communeName">
           <xf:label
                ref="instance('localized_strings')/autofill_commune-label[@lang=instance('localized_strings')/current_language]"
                model="data_model" /> 
        </xf:input>
        
        <xf:input bind="autofill_postal_code" id="fbc_autofill_postal_code" autofillkey="loginSession.user.usersMainAddress.postalCode.postalCode">
           <xf:label
                ref="instance('localized_strings')/autofill_postal_code-label[@lang=instance('localized_strings')/current_language]"
                model="data_model" /> 
        </xf:input>
    
	    <xf:input bind="identifier_number" id="fbc_identifier_number">
	       <xf:label
                ref="instance('localized_strings')/identifier-label[@lang=instance('localized_strings')/current_language]"
                model="data_model" />  
	    </xf:input>
	    
		<xf:input bind="text" id="fbc_text">
			<xf:label
				ref="instance('localized_strings')/input-label[@lang=instance('localized_strings')/current_language]"
				model="data_model" />
		</xf:input>
		<xf:textarea bind="textarea" id="fbc_textarea">
			<xf:label
				ref="instance('localized_strings')/textarea-label[@lang=instance('localized_strings')/current_language]"
				model="data_model" />
		</xf:textarea>
		<xf:secret bind="secret" id="fbc_secret">
			<xf:label
				ref="instance('localized_strings')/secret-label[@lang=instance('localized_strings')/current_language]"
				model="data_model" />
		</xf:secret>
		<xf:select bind="multiple_select_minimal"
			id="fbc_multiple_select_minimal" appearance="minimal">
			<xf:label
				ref="instance('localized_strings')/select_minimal-label[@lang=instance('localized_strings')/current_language]"
				model="data_model" />
			<xf:itemset model="data_model" nodeset="instance('fbc_multiple_select_minimal_lds')/localizedEntries[@lang=instance('localized_strings')/current_language]/item">
	            <xf:label ref="itemLabel" />
                <xf:value ref="itemValue" />
            </xf:itemset>
		</xf:select>
		<xf:select1 bind="single_select_minimal"
			id="fbc_single_select_minimal" appearance="minimal">
			<xf:label
				ref="instance('localized_strings')/select1_minimal-label[@lang=instance('localized_strings')/current_language]"
				model="data_model" />
			<xf:itemset model="data_model" nodeset="instance('fbc_single_select_minimal_lds')/localizedEntries[@lang=instance('localized_strings')/current_language]/item">
	            <xf:label ref="itemLabel" />
                <xf:value ref="itemValue" />
            </xf:itemset>	
		</xf:select1>
		<xf:select bind="multiple_select" id="fbc_multiple_select"
			appearance="full">
			<xf:label
				ref="instance('localized_strings')/select_full-label[@lang=instance('localized_strings')/current_language]"
				model="data_model" />
			<xf:itemset model="data_model" nodeset="instance('fbc_multiple_select_lds')/localizedEntries[@lang=instance('localized_strings')/current_language]/item">
	            <xf:label ref="itemLabel" />
                <xf:value ref="itemValue" />
            </xf:itemset>
		</xf:select>
		<xf:select1 bind="single_select" id="fbc_single_select"
			appearance="full">
			<xf:label
				ref="instance('localized_strings')/select1_full-label[@lang=instance('localized_strings')/current_language]"
				model="data_model" />
			<xf:itemset model="data_model" nodeset="instance('fbc_single_select_lds')/localizedEntries[@lang=instance('localized_strings')/current_language]/item">
	            <xf:label ref="itemLabel" />
                <xf:value ref="itemValue" />
            </xf:itemset>
		</xf:select1>
		<xf:input bind="email" id="fbc_email">
			<xf:label
				ref="instance('localized_strings')/email-label[@lang=instance('localized_strings')/current_language]"
				model="data_model" />
			<xf:alert  ref="instance('localized_strings')/email.error[@lang=instance('localized_strings')/current_language]"/>
		</xf:input>
		
		<div type="fbc_static_output" id="fbc_static_output">
		<xf:output ref="instance('localized_strings')/static_output-text[@lang=instance('localized_strings')/current_language]" model="data_model" >
			<xf:label model="data_model" ref="instance('localized_strings')/static_output-label[@lang=instance('localized_strings')/current_language]"/>				
		</xf:output>
		</div>
		
		<xf:output bind="output_text" id="fbc_text_output">
			<xf:label model="data_model" ref="instance('localized_strings')/text_output-label[@lang=instance('localized_strings')/current_language]"/>				
		</xf:output>
			
		<div id="fbc_button_area" type="fbc_button_area" class="fbc_button_area"></div>
		<div id="fbc_simple_text" type="fbc_simple_text" class="fbc_simple_text">
			<xf:label ref="instance('localized_strings')/simple_text-label[@lang=instance('localized_strings')/current_language]" model="data_model" />
			<xf:output ref="instance('localized_strings')/simple_text-text[@lang=instance('localized_strings')/current_language]" model="data_model" />
		</div>
		<div id="fbc_header_text" type="fbc_header_text" class="fbc_header_text">
		      <xf:output ref="instance('localized_strings')/header_text-text[@lang=instance('localized_strings')/current_language]"
						model="data_model" />
	    </div>
		<hr id="fbc_separator" type="fbc_separator" class="fbc_separator" />
		<xf:group id="fbc_page" appearance="full">
			<xf:label 
				ref="instance('localized_strings')/page-label[@lang=instance('localized_strings')/current_language]"
				model="data_model" />
		</xf:group>
		<xf:group id="fbc_confirmation_page" appearance="full" type="fbc_confirmation_page">
			<xf:label 
				ref="instance('localized_strings')/confirmation_page-label[@lang=instance('localized_strings')/current_language]"
				model="data_model" />
		</xf:group>
		
		<xf:trigger id="fbc_button_next" type="fbc_button_next" bind="bind-controlsButton">
		  	<xf:label ref="instance('localized_strings')/next_button-label[@lang=instance('localized_strings')/current_language]" model="data_model" />
	        <xf:toggle ev:event="DOMActivate" />
	    </xf:trigger>
	    <xf:trigger id="fbc_button_previous" type="fbc_button_previous" bind="bind.controlsButton">
			<xf:label ref="instance('localized_strings')/previous_button-label[@lang=instance('localized_strings')/current_language]" model="data_model" />
	        <xf:toggle ev:event="DOMActivate" />
	    </xf:trigger>
	    
	    <xf:trigger class="fbc_button_submit" id="fbc_button_submit" type="fbc_button_submit" bind="bind.submissionButton">
            <xf:label model="data_model" ref="instance('localized_strings')/submit_button-label[@lang=instance('localized_strings')/current_language]"/>
            <xf:action ev:event="DOMActivate">
                <xf:setvalue ref="instance('control-instance')/submission" value="'true'"/>
                <idega:dispatch name="idega-validate" target="//h:body//*[starts-with(@id, 'fbc_')]"/>
                <xf:dispatch name="xforms-rebuild" target="data_model"/>
                <xf:dispatch name="xforms-recalculate" target="data_model"/>
                <xf:dispatch name="xforms-revalidate" target="data_model"/>
                <xf:dispatch name="xforms-refresh" target="data_model"/>
                <xf:action if="count-non-empty(instance('error-instance')/error)=0">
                    <xf:send submission="submit_data_submission"/>
                </xf:action>
                <xf:message if="count-non-empty(instance('error-instance')/error)!=0" level="modeless" ref="instance('localized_strings')/submission-error_message[@lang=instance('localized_strings')/current_language]"/>
            </xf:action>
        </xf:trigger>
        
        <xf:trigger bind="bind.submissionButton" class="fbc_button_submit">
            <xf:label model="data_model" ref="instance('localized_strings')/save_button-label[@lang=instance('localized_strings')/current_language]"/>
            <xf:action ev:event="DOMActivate">
                <xf:setvalue model="submission_model" ref="instance('saveForm-instance')/savePhase">true</xf:setvalue>
                <xf:dispatch name="xforms-rebuild" target="data_model"/>
                <xf:dispatch name="xforms-recalculate" target="data_model"/>
                <xf:dispatch name="xforms-revalidate" target="data_model"/>
                <xf:dispatch name="xforms-refresh" target="data_model"/>
                <idega:saveForm action="save" formId="instance('data-instance')/form_id" instanceId="data-instance" linkLocation="instance('saveForm-instance')/link" model="submission_model" submissionId="instance('data-instance')/saveFormData/submissionId" submissionIdentifier="instance('data-instance')/*[@nodeType='formIdentifier']"/>
                <idega:toggle />
            </xf:action>
        </xf:trigger>
	 	
	    <xf:trigger id="fbc_button_save" type="fbc_button_save">    
			<xf:label ref="instance('localized_strings')/save_button-label[@lang=instance('localized_strings')/current_language]" model="data_model" />
				<xf:setvalue ev:event="DOMActivate" ref="instance('control-instance')/required" value="'false'"/>
					   	  	<xf:action if="instance('control-instance')/enable='true'" ev:event="DOMActivate">
					   	  			<xf:setvalue ref="instance('control-instance')/enable" value = "'false'"/>
					   	  			<xf:send  submission="save_data_submission"/>
					    	</xf:action>
	        	<xf:toggle ev:event="DOMActivate" />			   	  						
	    </xf:trigger>
	</xf:group>
</xf:group>
</body>
</html>
